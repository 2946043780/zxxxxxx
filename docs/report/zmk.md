## 一、项目背景

在电商竞争日益激烈的当下，精准的广告投放对于提升营销效果、增强用户粘性、提高转化率至关重要。本项目旨在构建达摩盘基础特征用户画像标签体系，通过多维度数据整合与分析，为电商广告投放提供有力支持，实现广告精准触达目标用户，助力电商业务增长。

## 二、目标与意义

精准定位目标用户群体，深入洞察用户特征和消费行为，提高广告投放的精准度和有效性，降低营销成本，提升广告投资回报率，增强电商平台竞争力。

## 三、标签体系设计

### （一）用户年龄标签

1. **定义**：依据用户在淘宝平台的搜索、收藏、加购、下单、支付、评价等行为数据，以及商品类目属性数据，综合判断用户所属的年龄段区间，分为 18 - 24 岁、25 - 29 岁、30 - 34 岁、35 - 39 岁、40 - 49 岁、50 岁以上 6 类。
2. **数据来源**：用户行为数据、商品类目属性数据。若存在有效出生年份，直接判断年龄段；若无，则进入多行为加权判定流程。
3. **处理逻辑**：多行为加权判定流程中，涉及类目偏好、品牌偏好、价格敏感度、时间行为、搜索词分析、社交互动行为、设备信息等维度。针对每个维度预设各年龄段的偏好系数，加权汇总计算各年龄段总分，取最高分作为最终年龄段判断结果。例如，类目偏好得分计算，针对不同商品类目预设对应年龄段偏好系数，如 “时尚与潮流” 类目，18 - 24 岁偏好系数为 0.9，25 - 29 岁为 0.8 等；权重分配为类目偏好 30%、品牌偏好 20%、价格敏感度 15%、时间行为 10%、搜索词分析 10%、社交互动行为 10%、设备信息 5% 。
4. **更新频率**：每日更新一次，基于用户最近 30 天的行为数据重新计算。

### （二）用户性别标签

1. **定义**：基于用户在全网的行为数据，通过分析其在不同品类的购买、加购、收藏、浏览行为，判断用户性别，分为女性用户、男性用户和家庭用户。
2. **数据来源**：用户行为数据、商品一级品类列表。女性相关品类如女装、女鞋、美妆等；男性相关品类如男装、男鞋、网游装备等；家庭相关品类如厨房电器、生活日用品等。
3. **处理逻辑**：计算用户在女性相关品类和男性相关品类的行为得分，女性得分 = Σ(购买行为 ×50% + 加购 / 收藏行为 ×30% + 浏览行为 ×20%)× 对应品类权重，男性得分同理计算。男性用户：男性得分 > 女性得分 + 10%；家庭用户：购买行为覆盖多品类，且女性得分≤10% 。
4. **更新频率**：每日更新，基于用户最近 30 天的行为数据动态计算。

### （三）用户体重标签

1. **定义**：基于用户在淘宝系平台（淘宝、天猫、聚划算等）主动填写或设备同步的体重信息，经规则处理后生成标准化体重标签。
2. **数据来源**：订单信息（购买体重秤、健康类商品时填写的体重数据）、活动表单（参与大促活动时提交的体重信息）等。
3. **处理逻辑**：提取原始体重字段，进行单位转换（“斤” 换算为 “千克”，无单位默认 “千克”），剔除异常值（<30kg 或 > 200kg），排除非数值字符。按照优先级权重（实时同步数据权重 1.0、订单信息权重 0.8 ）选择数据，同权重时取最新时间戳数据，结果四舍五入。
4. **更新频率**：每日凌晨拉取更新，若用户有新数据按规则覆盖。

### （四）用户身高标签

1. **定义**：记录用户在阿里系电商平台主动填写的实名制身高数据，以及购物场景（如服饰鞋帽购买、运动装备购买等）中的尺码选择、客服沟通记录等信息，单位精确到厘米。
2. **数据来源**：个人信息身体数据、服饰 / 鞋类尺码选择信息、客服工单系统记录、设备同步数据等。
3. **处理逻辑**：过滤异常值（<100cm 或> 250cm ），排除特殊数字，过滤非整数数值。按照多源数据优先级（智能硬件数据权重 1.0、实名认证信息权重 0.9、近 30 天购物场景数据权重 0.85 ）选择数据，当标准差 > 5cm 时，取最近 3 次有效记录众数；母婴用户用儿童年龄身高百分位表推算。
4. **更新频率**：智能硬件数据、新订单数据实时更新；用户资料修改、客服记录 T + 1 更新；尺码推算规则库周级更新；年龄身高对照表月级更新。

### （五）星座标签

1. **定义**：根据用户填写的生日信息，解析对应的十二星座，用于分析用户的性格特征、消费偏好等画像属性。
2. **数据来源**：淘宝个人资料中的生日信息。
3. **处理逻辑**：按照十二星座的时间区间严格匹配，如白羊座（3 月 21 日 - 4 月 19 日）等。若未填写生日信息，则标记为未填写。
4. **更新频率**：用户主动修改生日后，触发实时计算更新星座标签；每日凌晨全量更新。

## 四、数据质量保障

1. **数据清洗**：在数据采集阶段，去除重复数据、无效数据，确保数据准确性和完整性。对于年龄标签中的无效出生年份、性别标签中的异常行为数据、体重和身高标签中的异常值和非数值字符等进行清洗处理。
2. **数据验证**：建立数据验证机制，对各标签计算结果进行合理性验证。例如，年龄标签的计算结果应在合理年龄段范围内；性别标签的行为得分计算应符合逻辑；体重和身高标签的数据应符合正常生理范围等。
3. **异常监测**：实时监测数据异常情况，如用户行为数据的突变、标签计算结果的异常波动等。对于异常数据及时进行排查和处理，确保标签体系的稳定性和可靠性。

## 五、项目实施计划

1. **需求分析与设计阶段（[具体时间区间 1]）**：完成用户画像标签体系的需求调研和详细设计，包括标签定义、数据来源、处理逻辑、更新频率等内容。编写设计文档、代码注释规范等。
2. **开发与测试阶段（[具体时间区间 2]）**：开发达摩盘基础特征代码，实现不分层、分层两种方式，确保代码功能正确、有明确注释。进行全面测试，包括单元测试、集成测试、性能测试等，保证不同实现方式数据一致。编写测试文档，记录测试过程和结果。
3. **上线与优化阶段（[具体时间区间 3]）**：将标签体系上线，导出原始数据（csv 格式 10 万条以下），记录运行日志。持续监测标签体系运行情况，根据业务反馈和数据分析结果，对标签体系进行优化和调整，不断提升标签体系的精准度和实用性。

## 六、风险与应对

1. **数据安全风险**：用户数据涉及隐私，存在数据泄露风险。应对措施包括加强数据加密存储和传输，严格限制数据访问权限，定期进行数据安全审计。
2. **算法准确性风险**：标签计算算法可能受数据质量、业务变化等因素影响，导致标签不准确。应对措施为建立算法评估和优化机制，定期评估算法准确性，根据业务变化及时调整算法参数和逻辑。
3. **业务变化风险**：电商业务发展变化快，可能导致现有标签体系无法满足需求。应对措施是保持与业务部门密切沟通，及时了解业务变化，对标签体系进行动态调整和扩展。




## **七、建表思路**

| 标签名称   | 数据来源                                        | 数据处理步骤                                                                                         | 计算逻辑                                                                                                                     | 更新频率                                                                                     | 数据质量保障要点                                                                                |
| ------ | ------------------------------------------- | ---------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| 用户年龄标签 | 用户行为数据（搜索、收藏、加购、下单、支付、评价）、商品类目属性数据          | 1. 检查是否有有效出生年份，有则直接判断年龄段  <br>2. 无有效出生年份时，收集各维度数据（类目偏好、品牌偏好等）                                  | 1. 为各维度预设不同年龄段偏好系数  <br>2. 类目偏好占 30%、品牌偏好 20%、价格敏感度 15%、时间行为 10%、搜索词分析 10%、社交互动行为 10%、设备信息 5%  <br>3. 计算各年龄段总分，取最高分确定年龄段 | 每日更新，基于最近 30 天行为数据重新计算                                                                   | 1. 清洗无效出生年份数据  <br>2. 验证计算结果在 18 - 24 岁、25 - 29 岁等 6 个合理年龄段内  <br>3. 监测用户行为数据突变对年龄判断的影响 |
| 用户性别标签 | 用户行为数据（购买、加购、收藏、浏览）、商品一级品类列表（分女性、男性、家庭相关品类） | 收集用户在不同品类的行为数据，区分行为类型（购买、加购等）                                                                  | 1. 女性得分 =Σ(购买行为 ×50% + 加购 / 收藏行为 ×30% + 浏览行为 ×20%)× 对应品类权重，男性得分同理  <br>2. 男性用户：男性得分 > 女性得分 + 10%；家庭用户：购买覆盖多品类且女性得分≤10%   | 每日更新，基于最近 30 天行为数据动态计算                                                                   | 1. 清洗异常行为数据  <br>2. 验证行为得分计算逻辑合理性，如权重分配、品类对应等  <br>3. 监测行为数据突变对性别判断的影响                  |
| 用户体重标签 | 订单信息（购买体重秤、健康类商品填写数据）、活动表单（大促活动提交数据）        | 1. 提取原始体重字段  <br>2. 单位转换（“斤” 换算为 “千克”，无单位默认 “千克”）  <br>3. 剔除 <30kg 或> 200kg 数据  <br>4. 排除非数值字符 | 按照实时同步数据（权重 1.0）、订单信息（权重 0.8）选择数据，同权重时取最新时间戳数据，结果四舍五入                                                                    | 每日凌晨拉取更新，有新数据按规则覆盖                                                                       | 1. 清洗异常值（<30kg 或> 200kg）和非数值字符数据  <br>2. 验证体重数据在正常生理范围  <br>3. 监测数据突变对体重标签的影响           |
| 用户身高标签 | 个人信息身体数据、服饰 / 鞋类尺码选择信息、客服工单系统记录、设备同步数据      | 1. 过滤 <100cm 或> 250cm 数据  <br>2. 排除特殊数字  <br>3. 过滤非整数数值                                        | 1. 按智能硬件数据（权重 1.0）、实名认证信息（权重 0.9）、近 30 天购物场景数据（权重 0.85）等选择数据  <br>2. 标准差 > 5cm 时，取最近 3 次有效记录众数；母婴用户用儿童年龄身高百分位表推算         | 1. 智能硬件数据、新订单数据实时更新  <br>2. 用户资料修改、客服记录 T + 1 更新  <br>3. 尺码推算规则库周级更新  <br>4. 年龄身高对照表月级更新 | 1. 清洗异常值（<100cm 或> 250cm ）和特殊数字数据  <br>2. 验证身高数据在正常生理范围  <br>3. 监测数据突变对身高标签的影响          |
| 星座标签   | 淘宝个人资料中的生日信息                                | 检查生日信息是否填写完整                                                                                   | 按照十二星座时间区间严格匹配，未填写生日标记为未填写                                                                                               | 1. 用户主动修改生日后实时更新  <br>2. 每日凌晨全量更新                                                        | 1. 清洗无效生日数据（若有）  <br>2. 验证星座匹配准确性，确保符合十二星座时间区间  <br>3. 监测生日信息修改对星座标签的影响                 |



## **八、建表语句**
```
建表语句第一版本


-- 创建用户年龄标签表
CREATE TABLE user_age_label ( 
	user_id VARCHAR(255) PRIMARY KEY, 
	age_group VARCHAR(20),
	data_source TEXT, 
	calculation_logic TEXT, 
	update_frequency VARCHAR(20),
	data_quality_measures TEXT, 
	last_update_date DATE 
);

-- 创建用户性别标签表
CREATE TABLE user_gender_label (
	user_id VARCHAR(255) PRIMARY KEY,
	gender VARCHAR(20), 
	data_source TEXT,
	calculation_logic TEXT, 
	update_frequency VARCHAR(20),
	data_quality_measures TEXT,
	last_update_date DATE 
);

-- 创建用户体重标签表 
CREATE TABLE user_weight_label ( 
	user_id VARCHAR(255) PRIMARY KEY,
	weight DECIMAL(5,2), 
	data_source TEXT,
	calculation_logic TEXT,
	update_frequency VARCHAR(20), 
	data_quality_measures TEXT,
	last_update_date DATE 
); 

-- 创建用户身高标签表 
CREATE TABLE user_height_label ( 
	user_id VARCHAR(255) PRIMARY KEY, 
	height INT,
	data_source TEXT, 
	calculation_logic TEXT,
	update_frequency VARCHAR(20), 
	data_quality_measures TEXT, 
	last_update_date DATE 
);

-- 创建星座标签表 
CREATE TABLE user_constellation_label ( 
	user_id VARCHAR(255) PRIMARY KEY, 
	constellation VARCHAR(20), 
	data_source TEXT, 
	calculation_logic TEXT, 
	update_frequency VARCHAR(20), 
	data_quality_measures TEXT, 
	last_update_date DATE 
);
```

```
建表语句第二版本


-- 用户年龄标签表：存储用户年龄段分类信息
CREATE TABLE user_age_label (
    user_id VARCHAR(255) PRIMARY KEY COMMENT '用户唯一标识',
    age_group VARCHAR(20) COMMENT '年龄段区间（如18-24岁、25-29岁等）',
    data_source TEXT COMMENT '数据来源（用户行为数据、商品类目属性数据等）',
    processing_logic TEXT COMMENT '处理逻辑（多行为加权判定流程说明）',
    update_frequency VARCHAR(20) COMMENT '更新频率（每日更新一次）',
    last_update_date DATE COMMENT '最后更新日期'
);

-- 用户性别标签表：存储用户性别分类信息
CREATE TABLE user_gender_label (
    user_id VARCHAR(255) PRIMARY KEY COMMENT '用户唯一标识',
    gender_type VARCHAR(20) COMMENT '性别类型（女性用户、男性用户、家庭用户）',
    data_source TEXT COMMENT '数据来源（用户行为数据、商品一级品类列表）',
    processing_logic TEXT COMMENT '处理逻辑（女性/男性得分计算方式）',
    update_frequency VARCHAR(20) COMMENT '更新频率（每日更新）',
    last_update_date DATE COMMENT '最后更新日期'
);

-- 用户体重标签表：存储用户体重标准化信息
CREATE TABLE user_weight_label (
    user_id VARCHAR(255) PRIMARY KEY COMMENT '用户唯一标识',
    weight DECIMAL(5,2) COMMENT '体重值（单位：千克，四舍五入保留两位小数）',
    data_source TEXT COMMENT '数据来源（订单信息、活动表单等）',
    processing_logic TEXT COMMENT '处理逻辑（单位转换、异常值剔除规则）',
    update_frequency VARCHAR(20) COMMENT '更新频率（每日凌晨拉取更新）',
    last_update_date DATE COMMENT '最后更新日期'
);

-- 用户身高标签表：存储用户身高标准化信息
CREATE TABLE user_height_label (
    user_id VARCHAR(255) PRIMARY KEY COMMENT '用户唯一标识',
    height INT COMMENT '身高值（单位：厘米，精确到整数）',
    data_source TEXT COMMENT '数据来源（个人信息、购物场景尺码选择等）',
    processing_logic TEXT COMMENT '处理逻辑（异常值过滤、多源数据优先级规则）',
    update_frequency VARCHAR(20) COMMENT '更新频率（智能硬件数据实时更新等）',
    last_update_date DATE COMMENT '最后更新日期'
);

-- 用户星座标签表：存储用户星座信息
CREATE TABLE user_constellation_label (
    user_id VARCHAR(255) PRIMARY KEY COMMENT '用户唯一标识',
    constellation VARCHAR(20) COMMENT '星座名称（如白羊座、金牛座等）',
    data_source TEXT COMMENT '数据来源（淘宝个人资料中的生日信息）',
    processing_logic TEXT COMMENT '处理逻辑（十二星座时间区间匹配规则）',
    update_frequency VARCHAR(20) COMMENT '更新频率（用户修改生日实时更新）',
    last_update_date DATE COMMENT '最后更新日期'
);    
```


### **技术栈建议**

- 数据存储：MySQL/PostgreSQL（标签表）、Hive/HDFS（原始数据）
- 计算引擎：Spark（批处理）、Flink（实时计算）
- 开发语言：Python/SQL
- 调度工具：Airflow
- 监控：Prometheus + Grafana

### 结尾：**关键交付物**

- 需求文档
- 数据模型设计
- 表结构 SQL 脚本
- 标签计算代码
- 数据质量报告
- API 文档
- 测试报告
- 运维手册